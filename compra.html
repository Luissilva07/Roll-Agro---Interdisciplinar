<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes do Produto</title>
    <link rel="stylesheet" href="./css/head.css">
    <link rel="stylesheet" href="css/styles.css" />
    <style>
        /* Estilos para o main */
        /* Estilos globais */
        body {
            font-family: 'Poppins', sans-serif; /* Fonte Poppins */
            background-color: #f0f4f8; /* Cor de fundo suave */
            margin: 0;
            padding: 0;
            line-height: 1.6; /* Melhora a legibilidade */
        }

        /* Estilos para o main */
        main {
            padding: 40px; /* Aumenta o padding */
            background-color: #ffffff; /* Cor de fundo branca */
            border-radius: 12px; /* Bordas arredondadas */
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); /* Sombra suave */
            max-width: 800px; /* Largura máxima */
            margin: 40px auto; /* Centraliza o main */
            transition: transform 0.3s; /* Transição suave */
        }

        main:hover {
            transform: translateY(-5px); /* Efeito de elevação ao passar o mouse */
        }

        /* Estilo para o título */
        main h1 {
            font-size: 2.5em; /* Tamanho da fonte */
            color: #333; /* Cor do texto escuro */
            text-align: center; /* Centraliza o texto */
            margin-bottom: 30px; /* Espaço abaixo do título */
            text-transform: uppercase; /* Texto em maiúsculas */
            letter-spacing: 1px; /* Espaçamento entre letras */
        }

        /* Estilo para os detalhes do produto */
        #productDetails {
            text-align: center; /* Centraliza o conteúdo */
        }

        /* Estilo para a imagem do produto */
        #productDetails img {
            max-width: 100%; /* Imagem responsiva */
            height: auto; /* Mantém a proporção */
            border-radius: 12px; /* Bordas arredondadas */
            margin-bottom: 20px; /* Espaço abaixo da imagem */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Sombra suave */
            transition: transform 0.3s; /* Transição suave */
        }

        #productDetails img:hover {
            transform: scale(1.05); /* Efeito de zoom ao passar o mouse */
        }

        /* Estilo para o nome do produto */
        #productDetails h2 {
            font-size: 2em; /* Tamanho da fonte */
            color: #4CAF50; /* Cor do texto verde */
            margin-bottom: 15px; /* Espaço abaixo do nome */
            font-weight: bold; /* Negrito */
        }

        /* Estilo para a descrição e preço */
        #productDetails p {
            font-size: 1.2em; /* Tamanho da fonte */
            color: #555; /* Cor do texto */
            margin: 10px 0; /* Espaço acima e abaixo */
        }

        /* Estilo para o link de voltar */
        #productDetails a {
            display: inline-block; /* Para aplicar padding */
            margin-top: 20px; /* Espaço acima do link */
            padding: 12px 25px; /* Espaçamento interno */
            background-color: #4CAF50; /* Cor de fundo do botão */
            color: white; /* Cor do texto */
            text-decoration: none; /* Remove sublinhado */
            border-radius: 5px; /* Bordas arredondadas */
            transition: background-color 0.3s, transform 0.3s; /* Transição suave */
            font-weight: bold; /* Negrito */
        }

        #productDetails a:hover {
            background-color: #45a049; /* Cor de fundo ao passar o mouse */
            transform: translateY(-2px); /* Efeito de elevação */
        }

        /* Estilo para a seção do carrinho */
        #cartSection {
            text-align: center; /* Centraliza o conteúdo */
            margin-top: 30px; /* Espaço acima da seção do carrinho */
            padding: 20px; /* Espaçamento interno */
            background-color: #f9f9f9; /* Cor de fundo suave */
            border-radius: 12px; /* Bordas arredondadas */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Sombra suave */
        }

        #cartSection h3 {
            font-size: 1.8em; /* Tamanho da fonte */
            color: #333; /* Cor do texto escuro */
            margin-bottom: 15px; /* Espaço abaixo do título */
        }

        #cartSection p {
            font-size: 1.2em; /* Tamanho da fonte */
            color: #555; /* Cor do texto */
        }

        #cartSection button {
            padding: 10px 20px; /* Espaçamento interno */
            background-color: #4CAF50; /* Cor de fundo do botão */
            color: white; /* Cor do texto */
            border: none; /* Remove bordas */
            border-radius: 5px; /* Bordas arredondadas */
            cursor: pointer; /* Cursor de ponteiro */
            transition: background-color 0.3s; /* Transição suave */
        }

        #cartSection button:hover {
            background-color: #45a049; /* Cor de fundo ao passar o mouse */
        }
        #quantity {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 10px 0;
        }

        #quantity-input {
            width: 50px;
            padding: 5px;
            margin: 0 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
            font-size: 16px;
        }
        /* Estilo do alerta */
.alert {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: #4CAF50; /* Cor de fundo verde */
    color: white; /* Cor do texto */
    padding: 20px;
    border-radius: 5px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    z-index: 1000; /* Certifique-se de que o alerta apareça acima de outros elementos */
    transition: opacity 0.3s ease;
}

.hidden {
    display: none; /* Esconde o alerta */
}

.alert button {
    background-color: transparent; /* Fundo transparente */
    color: white; /* Cor do texto do botão */
    border: none; /* Remove bordas */
    cursor: pointer; /* Cursor de ponteiro */
    margin-left: 15px; /* Espaço à esquerda do botão */
    font-weight: bold; /* Negrito */
}

.alert button:hover {
    text-decoration: underline; /* Sublinha ao passar o mouse */
}

    </style>
</head>

<body>
    <header>
        <nav class="navbar">
            <div class="logo">
                <img src="img/logo.svg" />
            </div>
            <div class="links">
                <a href="index.html">Menu</a>
                <a href="produtos.html">Produtos</a>
                <a href="contato.html">Contatos</a>
                <a href="sobre.html">Sobre</a>
                <a href="login.html" class="join-link"><img class="link-login" src="img/profile.png" alt="" /></a>
            </div>
        </nav>
    </header>
    <main>
        <div id="productDetails"></div>
        <!-- Seção para adicionar ao carrinho -->
        <div id="cartSection">
            <label id="quantity" for="quantity">Quantidade:</label>
            <input type="number" id="quantity-input" value="1" min="1" />
            <button id="addToCart">Adicionar ao Carrinho</button>
            <button id="clearCartButton" onclick="clearCart()">Limpar Carrinho</button>
            <p id="totalPrice" style="font-size: 1.2em; color: #1c183d; margin-top: 10px; font-weight: bold;"></p>
            <button id="checkout" style="display: none;" onclick="pay()">Pagar</button>
        </div>
        
    </main>
    <div id="loader" class="loader">
        <img src="img/icon2.jpeg" alt="Carregando..." />
    </div>]
    <div id="customAlert" class="alert hidden">
        <span id="alertMessage"></span>
        <button id="closeAlert">Fechar</button>
    </div>
    <footer>
        <div class="footer-top">
            <div class="newsletter">
                <input type="email" id="email-input" placeholder="enter your email" />
                <button type="submit" onclick="enviarEmail()">→</button>
            </div>
            <nav>
                <ul>
                    <li><a href="#">Menu</a></li>
                    <li><a href="#">Carrinho</a></li>
                    <li><a href="#">Contato</a></li>
                    <li><a href="#">Equipe</a></li>
                </ul>
            </nav>
            <div class="social-and-text">
                <div class="social-icons">
                    <a href="#"><img onmouseover="whatsapp()" id="imagem1" src="./img/Whatsapp.png" alt="WhatsApp"></a>
                    <a href="#"><img onmouseover="facebook()" src="./img/facebook.png" id="imagem2" alt="Facebook"></a>
                    <a href="https://www.instagram.com/roll.agro/"><img onmouseover="instagram()" id="imagem3"
                            src="./img/instagram.png" alt="Instagram"></a>
                </div>
                <p>Um bom plantiu resulta em uma boa colheita</p>
            </div>
        </div>
        <hr />
        <div class="footer-bottom">
            <img src="./img/logo.svg" alt="Roll Agro">
            <p>© 2024 ROLL COMPANY. A ROLL AGRO é uma marca comercial da ROLL COMPANY. Faça compras de produtos de alta
                qualidade e de boa competência.</p>
        </div>
    </footer>
    <script src="./script/script.js"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
const productId = urlParams.get('id');
const product = products.find(p => p.id == productId);
let totalQuantity = 0; // Variável para armazenar a quantidade total

// Exibe os detalhes do produto
document.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const productId = urlParams.get('id');
    const product = products.find(p => p.id == productId);
    let totalQuantity = 0; // Variável para armazenar a quantidade total

    // Exibe os detalhes do produto
    if (product) {
        document.getElementById('productDetails').innerHTML = `
            <img src="${product.image}" alt="${product.name}">
            <h2>${product.name}</h2>
            <p>${product.description}</p>
            <p><strong>Preço:</strong> ${product.price}</p>
            <a onclick="window.history.back()">Voltar</a>
        `;

        const addToCartButton = document.getElementById('addToCart');
        const quantityInput = document.getElementById('quantity-input');
        const totalPriceDisplay = document.getElementById('totalPrice');
        const checkoutButton = document.getElementById('checkout');

        addToCartButton.addEventListener('click', () => {
            const quantity = parseInt(quantityInput.value);
            if (isNaN(quantity) || quantity <= 0) {
                alert('Por favor, insira uma quantidade válida.');
                return;
            }
            totalQuantity += quantity; // Atualiza a quantidade total
            const totalPrice = parseFloat(product.price.replace('R$ ', '').replace(',', '.')) * totalQuantity;

            totalPriceDisplay.innerText = `Preço Total: R$ ${totalPrice.toFixed(2)}`;
            checkoutButton.style.display = 'inline-block'; // Exibe o botão de pagamento
        });

        // Função para limpar o carrinho
        function clearCart() {
            totalQuantity = 0; // Reseta a quantidade total
            totalPriceDisplay.innerText = ''; // Limpa o preço total
            checkoutButton.style.display = 'none'; // Esconde o botão de pagamento
        }

// Função para mostrar o alerta
function showAlert(message) {
    const alertBox = document.getElementById('customAlert');
    const alertMessage = document.getElementById('alertMessage');
    alertMessage.innerText = message;
    alertBox.classList.remove('hidden'); // Mostra o alerta

    // Fecha o alerta quando o botão é clicado
    document.getElementById('closeAlert').onclick = () => {
        alertBox.classList.add('hidden'); // Esconde o alerta
    };

    // Esconde o alerta após 3 segundos (opcional)
    setTimeout(() => {
        alertBox.classList.add('hidden');
    }, 3000);
}

// Função para pagar
function pay() {
    const totalPrice = parseFloat(totalPriceDisplay.innerText.replace('Preço Total: R$ ', '').replace(',', '.'));
    if (totalPrice === 0) {
        showAlert("Seu carrinho está vazio!");
    } else {
        showAlert(`Compra realizada com sucesso! Total: R$ ${totalPrice.toFixed(2)}`);
        clearCart(); // Limpa o carrinho após o pagamento
    }
}
        // Adicionando eventos aos botões
        document.getElementById('clearCartButton').addEventListener('click', clearCart);
        checkoutButton.addEventListener('click', pay);
    } else 
        {
        document.getElementById('productDetails').innerHTML = `<p>Produto não encontrado.</p>`;
    }
});
    </script>

</body>

</html>